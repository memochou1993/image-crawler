<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <title>Image Crawler</title>
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <link href="/assets/css/app.css" rel="stylesheet">
</head>
<body>
  <div
    id="app"
  >
    <v-app>
      <v-content
        class="deep-purple lighten-3"
      >
        <v-container
          fill-height
        >
          <v-layout
            align-center
            justify-center
          >
            <v-flex
              md6
              sm8
            >
              <v-card
                height="544"
                class="deep-purple lighten-5 my-5"
              >
                <v-card-text
                  class="py-0"
                >
                  <div
                    class="display-1 font-weight-light text-center py-4 pointer"
                    @click="refresh()"
                  >
                    Image Crawler
                  </div>
                  <v-form
                    @submit.prevent="addLink()"
                    class="mb-4"
                  >
                    <v-text-field
                      v-model="link"
                      :rules="[]"
                      autofocus
                      autocomplete="off"
                      color="purple darken-2"
                      hide-details
                      label="http://"
                      solo
                    >
                      <v-icon
                        slot="append"
                        @click="addLink()"
                      >
                        mdi-plus-circle-outline
                      </v-icon>
                    </v-text-field>
                  </v-form>
                  <v-card
                    height="340"
                    outlined
                    class="overflow-auto deep-purple lighten-5"
                  >
                    <v-card-text
                      class="py-0"
                    >
                      <div
                        v-for="(link, index) in links"
                        :key="index"
                        class="my-2"
                      >
                        <v-layout
                          align-center
                        >
                          <v-flex
                            md1
                            sm2
                          >
                            <v-btn
                              color="indigo lighten-1"
                              fab
                              icon
                              small
                              @click="deleteLink(link)"
                            >
                              <v-icon>
                                mdi-minus-circle-outline
                              </v-icon>
                            </v-btn>
                          </v-flex>
                          <v-flex
                            md10
                            sm9
                          >
                            <v-chip
                              color="indigo lighten-1"
                              label
                              outlined
                            >
                              <span
                                class="text-truncate"
                              >
                                ${ link }
                              </span>
                            </v-chip>
                          </v-flex>
                        </v-layout>
                      </div>
                    </v-card-text>
                  </v-card>
                  <div
                    class="text-center py-4"
                  >
                    <v-btn
                      v-if="!previewed"
                      :disabled="loading || (!this.link && !links.length)"
                      color="indigo"
                      class="white--text"
                      @click="preview()"
                    >
                      Preview
                    </v-btn>
                    <v-btn
                      v-else
                      :disabled="loading || !images.length"
                      color="indigo"
                      class="white--text"
                      @click="download()"
                    >
                      Download
                    </v-btn>
                  </div>
                </v-card-text>
              </v-card>
              <v-card
                v-if="!!images.length"
                class="deep-purple lighten-5 my-5"
              >
                <v-card-text
                  class="pa-1"
                >
                  <v-carousel
                    hide-delimiters
                  >
                    <v-carousel-item
                      v-for="(image, index) in images"
                      :key="index"
                      :src="image"
                      reverse-transition="fade-transition"
                      transition="fade-transition"
                    >
                    </v-carousel-item>
                  </v-carousel>
                </v-card-text>
              </v-card>
            </v-flex>
          </v-layout>
        </v-container>
      </v-content>
    </v-app>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
  <script src="/assets/js/jszip.min.js"></script>
  <script src="/assets/js/app.js"></script>
</body>
</html>
